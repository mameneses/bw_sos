  [1m[36m (27.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (3.5ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseCreateUsers (20140918003936)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (10.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "first_name" character varying(255), "last_name" character varying(255), "email" character varying(255) DEFAULT '' NOT NULL, "encrypted_password" character varying(255) DEFAULT '' NOT NULL, "reset_password_token" character varying(255), "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying(255), "last_sign_in_ip" character varying(255), "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (1.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36m (0.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140918003936"]]
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to CreateCustomers (20140919065835)
  [1m[35m (6.1ms)[0m  BEGIN
  [1m[36m (16.2ms)[0m  [1mCREATE TABLE "customers" ("id" serial primary key, "first_name" character varying(255), "last_name" character varying(255), "address" character varying(255), "city" character varying(255), "state" character varying(255), "zip_code" character varying(255), "phone_num" character varying(255), "alt_phone_num" character varying(255), "email" character varying(255), "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140919065835"]]
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to CreateProducts (20140919070352)
  [1m[35m (6.0ms)[0m  BEGIN
  [1m[36m (19.4ms)[0m  [1mCREATE TABLE "products" ("id" serial primary key, "company" character varying(255), "model_type" character varying(255), "description" character varying(255), "price" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140919070352"]]
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateOrders (20140919070502)
  [1m[35m (6.0ms)[0m  BEGIN
  [1m[36m (20.0ms)[0m  [1mCREATE TABLE "orders" ("id" serial primary key, "placed_by" character varying(255), "placed_date" date, "follow_up_date" date, "customer_id" integer, "product_id" integer, "items_total" integer DEFAULT 0, "tax" integer, "total_with_tax" integer, "delivery" integer, "assembly" integer, "grand_total" integer, "deposit" integer, "balance_due" integer, "notes" text, "purchased_by" character varying(255), "gift_note" text, "complete" boolean, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140919070502"]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Migrating to CreateCustomersProductsJoinTable (20140925191902)
  [1m[35m (6.4ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mCREATE TABLE "customers_products" ("customer_id" integer, "product_id" integer) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140925191902"]]
  [1m[36m (11.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateOrdersProductsJoinTable (20140925194425)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mCREATE TABLE "orders_products" ("order_id" integer, "product_id" integer) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140925194425"]]
  [1m[36m (5.5ms)[0m  [1mCOMMIT[0m
Migrating to AddAdminToUsers (20141009225814)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (31.5ms)[0m  [1mALTER TABLE "users" ADD COLUMN "admin" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141009225814"]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Migrating to AddStoreLocationToOrders (20141106063026)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "orders" ADD COLUMN "store_location" character varying(255)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141106063026"]]
  [1m[36m (5.7ms)[0m  [1mCOMMIT[0m
Migrating to AddUpdatedByToOrders (20141109043336)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "orders" ADD COLUMN "updated_by" character varying(255)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141109043336"]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
Migrating to ChangePriceColumnToDecimal (20141112215433)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (21.8ms)[0m  [1mALTER TABLE "products" ALTER COLUMN "price" TYPE decimal(20,2)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141112215433"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Migrating to ChangeOrderTableToDecimal (20141112223735)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (18.3ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "items_total" TYPE decimal(20,2)[0m
  [1m[35m (32.9ms)[0m  ALTER TABLE "orders" ALTER COLUMN "tax" TYPE decimal(20,2)
  [1m[36m (3.6ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "total_with_tax" TYPE decimal(20,2)[0m
  [1m[35m (3.2ms)[0m  ALTER TABLE "orders" ALTER COLUMN "delivery" TYPE decimal(20,2)
  [1m[36m (3.1ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "assembly" TYPE decimal(20,2)[0m
  [1m[35m (3.2ms)[0m  ALTER TABLE "orders" ALTER COLUMN "grand_total" TYPE decimal(20,2)
  [1m[36m (2.7ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "deposit" TYPE decimal(20,2)[0m
  [1m[35m (2.6ms)[0m  ALTER TABLE "orders" ALTER COLUMN "balance_due" TYPE decimal(20,2)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20141112223735"]]
  [1m[35m (2.1ms)[0m  COMMIT
Migrating to AddDeliveryWithTaxToOrders (20141112233729)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "orders" ADD COLUMN "delivery_with_tax" decimal(20,2)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20141112233729"]]
  [1m[35m (6.2ms)[0m  COMMIT
Migrating to AddDiscountToProducts (20141112235230)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "products" ADD COLUMN "discount" decimal(20,2)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20141112235230"]]
  [1m[35m (6.0ms)[0m  COMMIT
Migrating to AddPickedUpToProducts (20141202201209)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "products" ADD COLUMN "picked_up" boolean
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20141202201209"]]
  [1m[35m (6.2ms)[0m  COMMIT
Migrating to ChangePickedUpDefaultToFalse (20141202213635)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "products" ALTER COLUMN "picked_up" TYPE boolean
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "products" ALTER COLUMN "picked_up" SET DEFAULT 'f'[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141202213635"]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
Migrating to AddPickUpDateToProducts (20141202215412)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "products" ADD COLUMN "pick_up_date" date[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141202215412"]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
Migrating to ChangeCustomerToNullTrue (20141202233350)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "customers" ALTER COLUMN "address" TYPE character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "customers" ALTER "address" DROP NOT NULL
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "customers" ALTER COLUMN "city" TYPE character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "customers" ALTER "city" DROP NOT NULL
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "customers" ALTER COLUMN "state" TYPE character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "customers" ALTER "state" DROP NOT NULL
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "customers" ALTER COLUMN "zip_code" TYPE character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "customers" ALTER "zip_code" DROP NOT NULL
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "customers" ALTER COLUMN "phone_num" TYPE character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "customers" ALTER "phone_num" DROP NOT NULL
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "customers" ALTER COLUMN "alt_phone_num" TYPE character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "customers" ALTER "alt_phone_num" DROP NOT NULL
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "customers" ALTER COLUMN "email" TYPE character varying(255)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "customers" ALTER "email" DROP NOT NULL
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20141202233350"]]
  [1m[35m (6.1ms)[0m  COMMIT
Migrating to AddPickupOrDeliveryToProducts (20141203235356)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (15.4ms)[0m  ALTER TABLE "products" ADD COLUMN "pickup_or_delivery" character varying(255) DEFAULT 'Pickup'
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20141203235356"]]
  [1m[35m (6.7ms)[0m  COMMIT
Migrating to ChangeOrderTableToDefault (20141204203815)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "orders" ALTER COLUMN "items_total" TYPE decimal(20,2)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "items_total" SET DEFAULT 0.0[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "orders" ALTER COLUMN "tax" TYPE decimal(20,2)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "tax" SET DEFAULT 0.0[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "orders" ALTER COLUMN "total_with_tax" TYPE decimal(20,2)
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "total_with_tax" SET DEFAULT 0.0[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "orders" ALTER COLUMN "delivery" TYPE decimal(20,2)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "delivery" SET DEFAULT 0.0[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "orders" ALTER COLUMN "delivery_with_tax" TYPE decimal(20,2)
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "delivery_with_tax" SET DEFAULT 0.0[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "orders" ALTER COLUMN "assembly" TYPE decimal(20,2)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "assembly" SET DEFAULT 0.0[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "orders" ALTER COLUMN "grand_total" TYPE decimal(20,2)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "grand_total" SET DEFAULT 0.0[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "orders" ALTER COLUMN "deposit" TYPE decimal(20,2)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "deposit" SET DEFAULT 0.0[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "orders" ALTER COLUMN "balance_due" TYPE decimal(20,2)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "orders" ALTER COLUMN "balance_due" SET DEFAULT 0.0[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141204203815"]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
Migrating to AddIssueToOrders (20141204213335)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (15.8ms)[0m  [1mALTER TABLE "orders" ADD COLUMN "issue" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141204213335"]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
Migrating to AddReadyToOrders (20150108010051)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (21.4ms)[0m  [1mALTER TABLE "orders" ADD COLUMN "ready" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150108010051"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
Migrating to RemoveReadyFromOrders (20150108011132)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "orders" DROP "ready"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150108011132"]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
Migrating to AddReadyToProducts (20150108011244)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (14.3ms)[0m  [1mALTER TABLE "products" ADD COLUMN "ready" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150108011244"]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.7ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 02:04:34.425573"], ["updated_at", "2015-04-01 02:04:34.425573"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 02:05:11.037523"], ["updated_at", "2015-04-01 02:05:11.037523"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 02:07:48.851811"], ["updated_at", "2015-04-01 02:07:48.851811"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 02:09:47.653169"], ["updated_at", "2015-04-01 02:09:47.653169"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 02:10:24.061121"], ["updated_at", "2015-04-01 02:10:24.061121"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 02:12:14.054175"], ["updated_at", "2015-04-01 02:12:14.054175"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 02:12:14.077722"], ["updated_at", "2015-04-01 02:12:14.077722"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 6  [["customer_id", 1], ["updated_at", "2015-04-01 02:12:14.092393"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 6]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 6]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 02:12:14.166662"], ["updated_at", "2015-04-01 02:12:14.166662"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 02:12:14.168233"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 02:12:14.168233"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 7], ["product_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 7]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 7[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 02:12:14.189316"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers_products" WHERE "customers_products"."product_id" = $1[0m  [["product_id", 1]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 7]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 7]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 05:49:43.699579"], ["updated_at", "2015-04-01 05:49:43.699579"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 05:49:43.704732"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 05:49:43.704732"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 8], ["product_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 8]]
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 2]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 8  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 05:49:43.788512"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 2]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 8]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 8]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 05:49:43.798911"], ["updated_at", "2015-04-01 05:49:43.798911"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 05:49:43.806210"], ["updated_at", "2015-04-01 05:49:43.806210"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 9  [["customer_id", 2], ["updated_at", "2015-04-01 05:49:43.809500"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 2]]
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 9]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 9]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:07:44.829966"], ["updated_at", "2015-04-01 06:07:44.829966"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:07:44.834056"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:07:44.834056"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 10], ["product_id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:07:44.858735"], ["updated_at", "2015-04-01 06:07:44.858735"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:07:44.860215"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:07:44.860215"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 11], ["product_id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 11]]
  [1m[35mOrder Load (0.4ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 4]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 11[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:07:44.914622"]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 4]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 11]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 11]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 06:07:44.925463"], ["updated_at", "2015-04-01 06:07:44.925463"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:07:44.932881"], ["updated_at", "2015-04-01 06:07:44.932881"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 12[0m  [["customer_id", 3], ["updated_at", "2015-04-01 06:07:44.936073"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 3]]
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 12]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 12]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 12]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1[0m  [["customer_id", 3]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 06:08:32.181114"], ["updated_at", "2015-04-01 06:08:32.181114"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:08:32.235525"], ["updated_at", "2015-04-01 06:08:32.235525"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 13  [["customer_id", 4], ["updated_at", "2015-04-01 06:08:32.248764"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 13]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 13]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 4]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:08:32.269081"], ["updated_at", "2015-04-01 06:08:32.269081"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:08:32.276944"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:08:32.276944"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 14], ["product_id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 14]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 5]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 14[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:08:32.292040"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 5]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 14]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 14]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:08:32.297965"], ["updated_at", "2015-04-01 06:08:32.297965"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:08:32.299452"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:08:32.299452"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 15], ["product_id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:08:55.680552"], ["updated_at", "2015-04-01 06:08:55.680552"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:08:55.691733"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:08:55.691733"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 16], ["product_id", 7]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.5ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 7]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 16  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:08:55.718182"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 06:08:55.767199"], ["updated_at", "2015-04-01 06:08:55.767199"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:08:55.774739"], ["updated_at", "2015-04-01 06:08:55.774739"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 17[0m  [["customer_id", 5], ["updated_at", "2015-04-01 06:08:55.778695"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 5]]
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 17]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 17]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 17]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1[0m  [["customer_id", 5]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:08:55.788791"], ["updated_at", "2015-04-01 06:08:55.788791"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:08:55.790132"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:08:55.790132"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 18], ["product_id", 8]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 18]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 8]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 18  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:08:55.797896"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 8]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 8]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 18]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 18]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 06:10:44.555873"], ["updated_at", "2015-04-01 06:10:44.555873"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:10:44.612593"], ["updated_at", "2015-04-01 06:10:44.612593"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 19  [["customer_id", 6], ["updated_at", "2015-04-01 06:10:44.624454"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 6]]
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 19]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 19]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 19]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 6]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:10:44.696861"], ["updated_at", "2015-04-01 06:10:44.696861"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:10:44.698650"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:10:44.698650"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 20], ["product_id", 9]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.5ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 9]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 20[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:10:44.717038"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:10:44.720612"], ["updated_at", "2015-04-01 06:10:44.720612"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:10:44.722291"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:10:44.722291"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 21], ["product_id", 10]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 21]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 10]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 21  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:10:44.731081"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 10]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 10]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 21]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 21]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 06:13:56.222125"], ["updated_at", "2015-04-01 06:13:56.222125"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:13:56.275197"], ["updated_at", "2015-04-01 06:13:56.275197"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 22  [["customer_id", 7], ["updated_at", "2015-04-01 06:13:56.285419"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 7]]
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 22]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 22]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 22]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 7]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:13:56.307030"], ["updated_at", "2015-04-01 06:13:56.307030"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:13:56.314996"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:13:56.314996"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 23], ["product_id", 11]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 23]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 11]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 23[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:13:56.331045"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 11]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 23]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 23]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:13:56.377913"], ["updated_at", "2015-04-01 06:13:56.377913"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:13:56.379427"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:13:56.379427"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 24], ["product_id", 12]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 12]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 24[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:13:56.385504"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:17:04.130220"], ["updated_at", "2015-04-01 06:17:04.130220"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:17:04.133702"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:17:04.133702"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 25], ["product_id", 13]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 13]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 25  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:17:04.191487"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:17:04.194581"], ["updated_at", "2015-04-01 06:17:04.194581"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:17:04.195848"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:17:04.195848"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 26], ["product_id", 14]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 26]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 14]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 26[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:17:04.203623"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 14]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 14]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 26]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 26]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 06:17:04.211087"], ["updated_at", "2015-04-01 06:17:04.211087"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:17:04.218262"], ["updated_at", "2015-04-01 06:17:04.218262"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 27[0m  [["customer_id", 8], ["updated_at", "2015-04-01 06:17:04.221289"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 8]]
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 27]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 27]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 27]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1[0m  [["customer_id", 8]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 8]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:21:26.344719"], ["updated_at", "2015-04-01 06:21:26.344719"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:21:26.348473"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:21:26.348473"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 28], ["product_id", 15]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 15]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 28  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:21:26.408312"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 15]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 15]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:21:26.412916"], ["updated_at", "2015-04-01 06:21:26.412916"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:21:26.414336"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:21:26.414336"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 29], ["product_id", 16]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 29]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 16]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 29[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:21:26.421863"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 16]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 16]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 29]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 29]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 06:21:26.428984"], ["updated_at", "2015-04-01 06:21:26.428984"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:21:26.436083"], ["updated_at", "2015-04-01 06:21:26.436083"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 30[0m  [["customer_id", 9], ["updated_at", "2015-04-01 06:21:26.440257"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 9]]
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 30]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 30]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 30]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1[0m  [["customer_id", 9]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 9]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:21:47.905682"], ["updated_at", "2015-04-01 06:21:47.905682"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:21:47.918150"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:21:47.918150"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 31], ["product_id", 17]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 17]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 31  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:21:47.945633"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:21:47.989228"], ["updated_at", "2015-04-01 06:21:47.989228"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:21:47.990801"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:21:47.990801"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 32], ["product_id", 18]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 32]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 18]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 32[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:21:48.000278"]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 18]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 18]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 32]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 32]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 06:21:48.009120"], ["updated_at", "2015-04-01 06:21:48.009120"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:21:48.016437"], ["updated_at", "2015-04-01 06:21:48.016437"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 33[0m  [["customer_id", 10], ["updated_at", "2015-04-01 06:21:48.019621"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 10]]
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 33]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 33]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 33]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1[0m  [["customer_id", 10]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 10]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:26:12.566840"], ["updated_at", "2015-04-01 06:26:12.566840"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:26:12.578243"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:26:12.578243"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 34], ["product_id", 19]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 19]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 19]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 34[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:26:12.608552"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:26:12.654045"], ["updated_at", "2015-04-01 06:26:12.654045"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:26:12.655524"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:26:12.655524"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 35], ["product_id", 20]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 35]]
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 20]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 35  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:26:12.667328"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 20]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 20]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 35]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 35]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 06:26:12.677839"], ["updated_at", "2015-04-01 06:26:12.677839"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:26:12.685431"], ["updated_at", "2015-04-01 06:26:12.685431"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 36  [["customer_id", 11], ["updated_at", "2015-04-01 06:26:12.688510"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 11]]
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 36]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 36]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 36]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 11]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 11]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 06:26:30.359349"], ["updated_at", "2015-04-01 06:26:30.359349"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:26:30.412114"], ["updated_at", "2015-04-01 06:26:30.412114"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 37  [["customer_id", 12], ["updated_at", "2015-04-01 06:26:30.423955"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 12]]
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 37]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 37]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 37]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 12]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 12]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:26:30.444592"], ["updated_at", "2015-04-01 06:26:30.444592"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:26:30.452092"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:26:30.452092"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 38], ["product_id", 21]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 38]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 21]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 38[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:26:30.471055"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 21]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 38]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 38]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:26:30.517504"], ["updated_at", "2015-04-01 06:26:30.517504"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:26:30.519238"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:26:30.519238"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 39], ["product_id", 22]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 22]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 22]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 39  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:26:30.527757"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:28:47.280727"], ["updated_at", "2015-04-01 06:28:47.280727"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:28:47.292020"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:28:47.292020"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 40], ["product_id", 23]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 23]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 23]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 40[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 06:28:47.323272"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 23]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:28:47.367569"], ["updated_at", "2015-04-01 06:28:47.367569"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:28:47.369463"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:28:47.369463"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 41], ["product_id", 24]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 24]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 24]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 41  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:28:47.378614"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 06:28:47.383398"], ["updated_at", "2015-04-01 06:28:47.383398"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:28:47.391414"], ["updated_at", "2015-04-01 06:28:47.391414"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 42[0m  [["customer_id", 13], ["updated_at", "2015-04-01 06:28:47.394596"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 13]]
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 42]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 42]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 42]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1[0m  [["customer_id", 13]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 13]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:28:47.404848"], ["updated_at", "2015-04-01 06:28:47.404848"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:28:47.406240"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:28:47.406240"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 43], ["product_id", 25]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 43]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 25]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 43  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:28:47.416145"]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 25]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 25]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 43]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 43]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 06:34:04.624626"], ["updated_at", "2015-04-01 06:34:04.624626"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:34:04.647719"], ["updated_at", "2015-04-01 06:34:04.647719"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 44  [["customer_id", 14], ["updated_at", "2015-04-01 06:34:04.658560"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 14]]
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 44]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 44]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 44]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 14]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 14]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:34:04.679042"], ["updated_at", "2015-04-01 06:34:04.679042"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:34:04.686924"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:34:04.686924"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 45], ["product_id", 26]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 45]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 26]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 45[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:34:04.704847"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 26]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 26]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 45]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 45]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:34:04.754260"], ["updated_at", "2015-04-01 06:34:04.754260"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:34:04.756471"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:34:04.756471"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 46], ["product_id", 27]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 27]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 27]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 46  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 06:34:04.767412"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 27]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:34:04.775826"], ["updated_at", "2015-04-01 06:34:04.775826"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:34:04.777204"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:34:04.777204"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 47], ["product_id", 28]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 28]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 28]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 47[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:34:04.784173"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 06:34:52.881065"], ["updated_at", "2015-04-01 06:34:52.881065"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:34:52.902096"], ["updated_at", "2015-04-01 06:34:52.902096"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 48  [["customer_id", 15], ["updated_at", "2015-04-01 06:34:52.911910"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 15]]
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 48]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 48]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 48]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 15]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 15]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:34:52.932867"], ["updated_at", "2015-04-01 06:34:52.932867"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:34:52.941449"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:34:52.941449"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 49], ["product_id", 29]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 49]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 29]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 49[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:34:52.956447"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 29]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 29]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 49]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 49]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:34:53.001508"], ["updated_at", "2015-04-01 06:34:53.001508"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:34:53.003084"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:34:53.003084"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 50], ["product_id", 30]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 30]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 30]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 50  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:34:53.013627"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:34:53.018579"], ["updated_at", "2015-04-01 06:34:53.018579"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:34:53.019986"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:34:53.019986"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 51], ["product_id", 31]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 31]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 31]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 51  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 06:34:53.027100"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 31]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 06:37:22.982802"], ["updated_at", "2015-04-01 06:37:22.982802"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:37:23.007181"], ["updated_at", "2015-04-01 06:37:23.007181"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 52  [["customer_id", 16], ["updated_at", "2015-04-01 06:37:23.017738"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 16]]
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 52]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 52]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 52]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 16]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 16]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:37:23.040933"], ["updated_at", "2015-04-01 06:37:23.040933"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:37:23.048582"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:37:23.048582"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 53], ["product_id", 32]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 53]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 32]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 53[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:37:23.065972"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 32]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 32]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 53]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 53]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:37:23.113603"], ["updated_at", "2015-04-01 06:37:23.113603"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:37:23.115136"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:37:23.115136"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 54], ["product_id", 33]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 33]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 33]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 54  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:37:23.123374"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:37:23.125826"], ["updated_at", "2015-04-01 06:37:23.125826"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:37:23.127320"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:37:23.127320"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 55], ["product_id", 34]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 34]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 34]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 55  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 06:37:23.134588"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 34]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 06:37:37.250452"], ["updated_at", "2015-04-01 06:37:37.250452"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:37:37.273868"], ["updated_at", "2015-04-01 06:37:37.273868"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 56  [["customer_id", 17], ["updated_at", "2015-04-01 06:37:37.284309"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 17]]
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 56]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 56]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 56]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 17]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 17]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:37:37.306342"], ["updated_at", "2015-04-01 06:37:37.306342"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:37:37.315585"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:37:37.315585"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 57], ["product_id", 35]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 57]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 35]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 57[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:37:37.338279"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 35]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 35]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 57]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 57]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:37:37.388909"], ["updated_at", "2015-04-01 06:37:37.388909"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:37:37.390535"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:37:37.390535"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 58], ["product_id", 36]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 36]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 36]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 58  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:37:37.401170"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:37:37.403541"], ["updated_at", "2015-04-01 06:37:37.403541"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:37:37.404803"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:37:37.404803"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 59], ["product_id", 37]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 37]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 37]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 59  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 06:37:37.411716"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 37]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:39:06.470135"], ["updated_at", "2015-04-01 06:39:06.470135"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:39:06.481096"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:39:06.481096"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 60], ["product_id", 38]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 60]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 38]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 60  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:39:06.513972"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 38]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 38]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 60]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 60]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 06:39:06.522208"], ["updated_at", "2015-04-01 06:39:06.522208"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:39:06.529120"], ["updated_at", "2015-04-01 06:39:06.529120"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 61  [["customer_id", 18], ["updated_at", "2015-04-01 06:39:06.532463"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 18]]
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 61]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 61]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 61]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 18]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 18]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:39:06.543749"], ["updated_at", "2015-04-01 06:39:06.543749"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:39:06.545174"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:39:06.545174"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 62], ["product_id", 39]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 39]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 39]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 62  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:39:06.553110"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:39:06.558865"], ["updated_at", "2015-04-01 06:39:06.558865"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:39:06.560479"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:39:06.560479"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 63], ["product_id", 40]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 40]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 40]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 63  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 06:39:06.568667"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 40]]
  [1m[36m (34.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:39:48.623837"], ["updated_at", "2015-04-01 06:39:48.623837"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:39:48.635481"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:39:48.635481"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 64], ["product_id", 41]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 64]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 41]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 64  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:39:48.667486"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 41]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 41]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 64]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 64]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 06:39:48.675911"], ["updated_at", "2015-04-01 06:39:48.675911"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:39:48.683644"], ["updated_at", "2015-04-01 06:39:48.683644"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 65  [["customer_id", 19], ["updated_at", "2015-04-01 06:39:48.686892"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 19]]
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 65]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 65]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 65]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 19]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 19]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:39:48.698024"], ["updated_at", "2015-04-01 06:39:48.698024"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:39:48.699566"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:39:48.699566"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 66], ["product_id", 42]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (1.0ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 42]]
  [1m[35mOrder Load (0.4ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 42]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 66  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:39:48.712113"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:39:48.759905"], ["updated_at", "2015-04-01 06:39:48.759905"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:39:48.761583"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:39:48.761583"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 67], ["product_id", 43]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 43]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 43]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 67  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 06:39:48.770815"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 43]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:41:26.292806"], ["updated_at", "2015-04-01 06:41:26.292806"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:41:26.296258"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:41:26.296258"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 68], ["product_id", 44]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 44]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 44]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 68[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:41:26.325936"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:41:26.329437"], ["updated_at", "2015-04-01 06:41:26.329437"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:41:26.331054"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:41:26.331054"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 69], ["product_id", 45]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.5ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 45]]
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 45]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 69[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 06:41:26.340217"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 45]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:41:26.384964"], ["updated_at", "2015-04-01 06:41:26.384964"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:41:26.386579"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:41:26.386579"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 70], ["product_id", 46]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 70]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 46]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 70[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:41:26.398260"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 46]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 46]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 70]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 70]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 06:41:26.406200"], ["updated_at", "2015-04-01 06:41:26.406200"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:41:26.413445"], ["updated_at", "2015-04-01 06:41:26.413445"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 71[0m  [["customer_id", 20], ["updated_at", "2015-04-01 06:41:26.416514"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 20]]
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 71]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 71]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 71]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1[0m  [["customer_id", 20]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 20]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:46:12.754516"], ["updated_at", "2015-04-01 06:46:12.754516"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:46:12.758281"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:46:12.758281"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 72], ["product_id", 47]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.5ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 47]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 47]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 72[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 06:46:12.830726"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 47]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:46:12.836606"], ["updated_at", "2015-04-01 06:46:12.836606"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:46:12.837952"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:46:12.837952"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 73], ["product_id", 48]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 48]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 48]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 73  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:46:12.847083"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 06:46:12.851075"], ["updated_at", "2015-04-01 06:46:12.851075"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:46:12.858252"], ["updated_at", "2015-04-01 06:46:12.858252"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 74[0m  [["customer_id", 21], ["updated_at", "2015-04-01 06:46:12.860575"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 21]]
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 74]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 74]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 74]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1[0m  [["customer_id", 21]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 21]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:46:12.871982"], ["updated_at", "2015-04-01 06:46:12.871982"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:46:12.873387"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:46:12.873387"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 75], ["product_id", 49]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 75]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 49]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 75  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:46:12.882047"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 49]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 49]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 75]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 75]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 06:49:11.053601"], ["updated_at", "2015-04-01 06:49:11.053601"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:49:11.078604"], ["updated_at", "2015-04-01 06:49:11.078604"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 76  [["customer_id", 22], ["updated_at", "2015-04-01 06:49:11.088845"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 22]]
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 76]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 76]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 76]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 22]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 22]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 06:49:11.159427"], ["updated_at", "2015-04-01 06:49:11.159427"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 06:49:11.161135"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:49:11.161135"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 77], ["product_id", 50]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 50]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 50]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 77  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 06:49:11.178726"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 50]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:49:11.182324"], ["updated_at", "2015-04-01 06:49:11.182324"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:49:11.183656"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:49:11.183656"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 78], ["product_id", 51]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 51]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 51]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 78[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:49:11.192041"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:49:11.196351"], ["updated_at", "2015-04-01 06:49:11.196351"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:49:11.198158"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:49:11.198158"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 79], ["product_id", 52]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 79]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 52]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 79  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:49:11.207337"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 52]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 52]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 79]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 79]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:53:37.439303"], ["updated_at", "2015-04-01 06:53:37.439303"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:53:37.450171"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 06:53:37.450171"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 80], ["product_id", 53]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 80]]
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 53]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 80  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 06:53:37.479908"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 53]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 53]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 80]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 80]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:53:37.487381"], ["updated_at", "2015-04-01 06:53:37.487381"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:53:37.489473"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:53:37.489473"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 81], ["product_id", 54]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 54]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 54]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 81[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 06:53:37.530780"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:53:37.534677"], ["updated_at", "2015-04-01 06:53:37.534677"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 06:53:37.536052"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 06:53:37.536052"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 82], ["product_id", 55]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 55]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 55]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 82[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 06:53:37.545055"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 55]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 06:53:37.556146"], ["updated_at", "2015-04-01 06:53:37.556146"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 06:53:37.563740"], ["updated_at", "2015-04-01 06:53:37.563740"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 83[0m  [["customer_id", 23], ["updated_at", "2015-04-01 06:53:37.566008"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 23]]
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 83]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 83]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 83]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1[0m  [["customer_id", 23]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 23]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:06:05.845860"], ["updated_at", "2015-04-01 08:06:05.845860"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:06:05.859150"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 08:06:05.859150"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 84], ["product_id", 56]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 84]]
  [1m[36mOrder Load (0.5ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 56]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 84  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 08:06:05.904842"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 56]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 56]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 84]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 84]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:06:05.912217"], ["updated_at", "2015-04-01 08:06:05.912217"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:06:05.913548"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:06:05.913548"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 85], ["product_id", 57]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 57]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 57]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 85[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 08:06:05.956297"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:06:05.959667"], ["updated_at", "2015-04-01 08:06:05.959667"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:06:05.960926"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:06:05.960926"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 86], ["product_id", 58]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 58]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 58]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 86[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 08:06:05.968702"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 58]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 08:06:05.981951"], ["updated_at", "2015-04-01 08:06:05.981951"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:06:05.988667"], ["updated_at", "2015-04-01 08:06:05.988667"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 87[0m  [["customer_id", 24], ["updated_at", "2015-04-01 08:06:05.990590"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 24]]
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 87]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 87]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 87]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1[0m  [["customer_id", 24]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 24]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:08:44.552334"], ["updated_at", "2015-04-01 08:08:44.552334"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:08:44.565627"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 08:08:44.565627"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 88], ["product_id", 59]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 88]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 59]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 88  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 08:08:44.594261"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 59]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 59]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 88]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 88]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 08:08:44.603308"], ["updated_at", "2015-04-01 08:08:44.603308"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:08:44.643699"], ["updated_at", "2015-04-01 08:08:44.643699"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 89  [["customer_id", 25], ["updated_at", "2015-04-01 08:08:44.645912"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 25]]
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 89]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 89]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 89]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 25]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 25]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:08:44.656601"], ["updated_at", "2015-04-01 08:08:44.656601"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 08:08:44.657969"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:08:44.657969"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 90], ["product_id", 60]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 60]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 60]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 90  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 08:08:44.668334"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:08:44.677216"], ["updated_at", "2015-04-01 08:08:44.677216"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 08:08:44.678496"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:08:44.678496"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 91], ["product_id", 61]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 61]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 61]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 91  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 08:08:44.687243"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.5ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 61]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 08:09:10.637274"], ["updated_at", "2015-04-01 08:09:10.637274"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:09:10.658336"], ["updated_at", "2015-04-01 08:09:10.658336"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 92  [["customer_id", 26], ["updated_at", "2015-04-01 08:09:10.667480"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 26]]
  [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 92]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 92]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 92]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 26]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 26]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:09:10.737225"], ["updated_at", "2015-04-01 08:09:10.737225"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 08:09:10.738918"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:09:10.738918"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 93], ["product_id", 62]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 62]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 62]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 93  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 08:09:10.756664"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 62]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:09:10.761653"], ["updated_at", "2015-04-01 08:09:10.761653"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:09:10.762884"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:09:10.762884"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 94], ["product_id", 63]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 63]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 63]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 94[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 08:09:10.771624"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:09:10.773823"], ["updated_at", "2015-04-01 08:09:10.773823"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:09:10.775023"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 08:09:10.775023"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 95], ["product_id", 64]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 95]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 64]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 95  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 08:09:10.784142"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 64]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 64]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 95]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 95]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:09:26.494832"], ["updated_at", "2015-04-01 08:09:26.494832"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:09:26.505258"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 08:09:26.505258"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 96], ["product_id", 65]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 96]]
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 65]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 96  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 08:09:26.541679"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 65]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 65]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 96]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 96]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:09:26.548572"], ["updated_at", "2015-04-01 08:09:26.548572"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:09:26.549887"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:09:26.549887"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 97], ["product_id", 66]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 66]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 66]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 97[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 08:09:26.590690"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:09:26.593001"], ["updated_at", "2015-04-01 08:09:26.593001"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:09:26.594221"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:09:26.594221"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 98], ["product_id", 67]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 67]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 67]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 98[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 08:09:26.603230"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 67]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 08:09:26.614358"], ["updated_at", "2015-04-01 08:09:26.614358"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:09:26.621827"], ["updated_at", "2015-04-01 08:09:26.621827"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 99[0m  [["customer_id", 27], ["updated_at", "2015-04-01 08:09:26.623936"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 27]]
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 99]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 99]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 99]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1[0m  [["customer_id", 27]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 27]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:13:02.997336"], ["updated_at", "2015-04-01 08:13:02.997336"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:13:03.008703"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 08:13:03.008703"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 100], ["product_id", 68]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 100]]
  [1m[36mOrder Load (0.5ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 68]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 100  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 08:13:03.055013"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 68]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 68]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 100]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 100]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 08:13:03.064003"], ["updated_at", "2015-04-01 08:13:03.064003"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:13:03.102511"], ["updated_at", "2015-04-01 08:13:03.102511"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 101  [["customer_id", 28], ["updated_at", "2015-04-01 08:13:03.104631"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 28]]
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 101]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 101]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 101]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 28]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 28]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:13:03.115908"], ["updated_at", "2015-04-01 08:13:03.115908"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 08:13:03.117239"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:13:03.117239"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 102], ["product_id", 69]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 69]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 69]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 102  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 08:13:03.127335"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 69]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:13:03.141679"], ["updated_at", "2015-04-01 08:13:03.141679"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:13:03.142982"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:13:03.142982"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 103], ["product_id", 70]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 70]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 70]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 103[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 08:13:03.150548"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 08:15:16.785045"], ["updated_at", "2015-04-01 08:15:16.785045"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:15:16.806128"], ["updated_at", "2015-04-01 08:15:16.806128"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 104  [["customer_id", 29], ["updated_at", "2015-04-01 08:15:16.820017"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 29]]
  [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 104]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 104]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 104]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "customers_products" WHERE "customers_products"."customer_id" = $1  [["customer_id", 29]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 29]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:15:16.842626"], ["updated_at", "2015-04-01 08:15:16.842626"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 08:15:16.882626"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:15:16.882626"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 105], ["product_id", 71]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 71]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 71]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 105  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 08:15:16.899937"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 71]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:15:16.904400"], ["updated_at", "2015-04-01 08:15:16.904400"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:15:16.905557"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:15:16.905557"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 106], ["product_id", 72]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 72]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 72]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 106[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 08:15:16.911742"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:15:16.922502"], ["updated_at", "2015-04-01 08:15:16.922502"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:15:16.923826"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 08:15:16.923826"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 107], ["product_id", 73]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 107]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 73]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 107  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 08:15:16.931336"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 73]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 73]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 107]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 107]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:20:56.654048"], ["updated_at", "2015-04-01 08:20:56.654048"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:20:56.666779"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 08:20:56.666779"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 108], ["product_id", 74]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 108]]
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 74]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 108  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 08:20:56.697194"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 74]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 74]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 108]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 108]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 08:20:56.705827"], ["updated_at", "2015-04-01 08:20:56.705827"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:20:56.746792"], ["updated_at", "2015-04-01 08:20:56.746792"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 109  [["customer_id", 30], ["updated_at", "2015-04-01 08:20:56.749434"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 30]]
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 109]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 109]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 109]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 30]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:20:56.758947"], ["updated_at", "2015-04-01 08:20:56.758947"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:20:56.760309"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:20:56.760309"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 110], ["product_id", 75]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 75]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 75]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 110[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 08:20:56.768423"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 75]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:20:56.773053"], ["updated_at", "2015-04-01 08:20:56.773053"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 08:20:56.774217"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:20:56.774217"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 111], ["product_id", 76]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 76]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 76]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 111  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 08:20:56.782087"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 08:21:22.370139"], ["updated_at", "2015-04-01 08:21:22.370139"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:21:22.395247"], ["updated_at", "2015-04-01 08:21:22.395247"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 112  [["customer_id", 31], ["updated_at", "2015-04-01 08:21:22.404738"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 31]]
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 112]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 112]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 112]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 31]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:21:22.469188"], ["updated_at", "2015-04-01 08:21:22.469188"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:21:22.470857"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:21:22.470857"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 113], ["product_id", 77]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 77]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 77]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 113[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 08:21:22.486676"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 08:21:22.490478"], ["updated_at", "2015-04-01 08:21:22.490478"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 08:21:22.491872"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 08:21:22.491872"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 114], ["product_id", 78]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 78]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 78]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 114[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 08:21:22.498588"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 78]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 08:21:22.503331"], ["updated_at", "2015-04-01 08:21:22.503331"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 08:21:22.504344"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 08:21:22.504344"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 115], ["product_id", 79]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 115]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 79]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 115[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 08:21:22.512165"]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 79]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 79]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 115]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 115]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:00:01.920407"], ["updated_at", "2015-04-01 09:00:01.920407"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 09:00:01.926285"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:00:01.926285"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 116], ["product_id", 80]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.6ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 80]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 80]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 116[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 09:00:02.007318"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 80]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:00:02.024345"], ["updated_at", "2015-04-01 09:00:02.024345"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:00:02.025850"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:00:02.025850"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 117], ["product_id", 81]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 81]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 81]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 117  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 09:00:02.034585"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 09:00:02.038789"], ["updated_at", "2015-04-01 09:00:02.038789"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:00:02.045996"], ["updated_at", "2015-04-01 09:00:02.045996"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 118[0m  [["customer_id", 32], ["updated_at", "2015-04-01 09:00:02.049687"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 32]]
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 118]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 118]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 118]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 32]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:00:02.060680"], ["updated_at", "2015-04-01 09:00:02.060680"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:00:02.062514"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 09:00:02.062514"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 119], ["product_id", 82]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 119]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 82]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 119[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 09:00:02.074546"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 82]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 82]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 119]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 119]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:01:13.312814"], ["updated_at", "2015-04-01 09:01:13.312814"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 09:01:13.323454"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 09:01:13.323454"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 120], ["product_id", 83]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 120]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 83]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 120  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 09:01:13.387622"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 83]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 83]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 120]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 120]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:01:13.402489"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 09:01:13.402489"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:01:13.404267"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Jones"], ["updated_at", "2015-04-01 09:01:13.404267"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:01:13.405358"], ["email", "jjohnson@example.com"], ["first_name", "John"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 09:01:13.405358"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCustomer Load (2.1ms)[0m  SELECT "customers".* FROM "customers"  WHERE (LOWER(first_name) LIKE LOWER('%J%'))
  [1m[36mCustomer Load (0.2ms)[0m  [1mSELECT "customers".* FROM "customers"  WHERE (LOWER(last_name) LIKE LOWER('%J%'))[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 09:01:13.413031"], ["updated_at", "2015-04-01 09:01:13.413031"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:01:13.414617"], ["updated_at", "2015-04-01 09:01:13.414617"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 121[0m  [["customer_id", 36], ["updated_at", "2015-04-01 09:01:13.416887"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 36]]
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 121]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 121]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 121]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 36]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:01:13.433110"], ["updated_at", "2015-04-01 09:01:13.433110"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:01:13.434463"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:01:13.434463"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 122], ["product_id", 84]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 84]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 84]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 122  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 09:01:13.443361"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:01:13.446504"], ["updated_at", "2015-04-01 09:01:13.446504"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:01:13.447775"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:01:13.447775"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 123], ["product_id", 85]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 85]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 85]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 123  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 09:01:13.456626"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 85]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:02:04.968520"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 09:02:04.968520"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:02:04.972057"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 09:02:04.972057"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:02:04.973265"], ["email", "jjohnson@example.com"], ["first_name", "John"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 09:02:04.973265"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCustomer Load (0.4ms)[0m  SELECT "customers".* FROM "customers"  WHERE (LOWER(first_name) LIKE LOWER('%J%'))
  [1m[36mCustomer Load (0.2ms)[0m  [1mSELECT "customers".* FROM "customers"  WHERE (LOWER(last_name) LIKE LOWER('%J%'))[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 09:02:04.978506"], ["updated_at", "2015-04-01 09:02:04.978506"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:02:04.993331"], ["updated_at", "2015-04-01 09:02:04.993331"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 124[0m  [["customer_id", 40], ["updated_at", "2015-04-01 09:02:05.003206"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 40]]
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 124]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 124]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 124]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 40]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:02:05.056742"], ["updated_at", "2015-04-01 09:02:05.056742"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:02:05.064229"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 09:02:05.064229"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 125], ["product_id", 86]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 125]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 86]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 125[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 09:02:05.080714"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 86]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 86]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 125]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 125]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:02:05.095211"], ["updated_at", "2015-04-01 09:02:05.095211"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:02:05.096687"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:02:05.096687"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 126], ["product_id", 87]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 87]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 87]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 126  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 09:02:05.106421"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:02:05.108578"], ["updated_at", "2015-04-01 09:02:05.108578"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:02:05.109825"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:02:05.109825"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 127], ["product_id", 88]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 88]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 88]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 127  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 09:02:05.116690"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 88]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:02:32.564728"], ["updated_at", "2015-04-01 09:02:32.564728"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 09:02:32.568413"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:02:32.568413"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 128], ["product_id", 89]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 89]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 89]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 128[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 09:02:32.630180"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 89]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:02:32.637610"], ["updated_at", "2015-04-01 09:02:32.637610"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:02:32.638883"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:02:32.638883"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 129], ["product_id", 90]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 90]]
  [1m[35mOrder Load (0.4ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 90]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 129  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 09:02:32.646776"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 09:02:32.650883"], ["updated_at", "2015-04-01 09:02:32.650883"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:02:32.658128"], ["updated_at", "2015-04-01 09:02:32.658128"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 130[0m  [["customer_id", 41], ["updated_at", "2015-04-01 09:02:32.660292"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 41]]
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 130]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 130]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 130]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 41]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:02:32.669551"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 09:02:32.669551"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:02:32.670886"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 09:02:32.670886"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:02:32.672170"], ["email", "jjohnson@example.com"], ["first_name", "John"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 09:02:32.672170"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCustomer Load (0.3ms)[0m  [1mSELECT "customers".* FROM "customers"  WHERE (LOWER(first_name) LIKE LOWER('%J%'))[0m
  [1m[35mCustomer Load (0.2ms)[0m  SELECT "customers".* FROM "customers"  WHERE (LOWER(last_name) LIKE LOWER('%J%'))
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:02:32.677401"], ["updated_at", "2015-04-01 09:02:32.677401"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 09:02:32.678840"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 09:02:32.678840"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 131], ["product_id", 91]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 131]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 91]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 131  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 09:02:32.688361"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 91]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 91]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 131]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 131]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:32:56.733081"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 09:32:56.733081"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:32:56.737447"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 09:32:56.737447"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:32:56.738969"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 09:32:56.738969"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCustomer Load (0.6ms)[0m  SELECT "customers".* FROM "customers"  WHERE (LOWER(first_name) LIKE LOWER('%J%'))
  [1m[36mCustomer Load (0.2ms)[0m  [1mSELECT "customers".* FROM "customers"  WHERE (LOWER(last_name) LIKE LOWER('%J%'))[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 09:32:56.745028"], ["updated_at", "2015-04-01 09:32:56.745028"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:32:56.760172"], ["updated_at", "2015-04-01 09:32:56.760172"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 132[0m  [["customer_id", 48], ["updated_at", "2015-04-01 09:32:56.776165"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 48]]
  [1m[35mProduct Load (0.9ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 132]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 132]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 132]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 48]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:32:56.835845"], ["updated_at", "2015-04-01 09:32:56.835845"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:32:56.843430"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 09:32:56.843430"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 133], ["product_id", 92]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 133]]
  [1m[35mOrder Load (0.5ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 92]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 133[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 09:32:56.861952"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 92]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 92]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 133]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 133]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:32:56.882551"], ["updated_at", "2015-04-01 09:32:56.882551"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:32:56.884007"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:32:56.884007"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 134], ["product_id", 93]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 93]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 93]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 134  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 09:32:56.895495"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 93]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:32:56.898849"], ["updated_at", "2015-04-01 09:32:56.898849"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 09:32:56.899990"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:32:56.899990"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 135], ["product_id", 94]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 94]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 94]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 135[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 09:32:56.908147"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 09:33:42.775402"], ["updated_at", "2015-04-01 09:33:42.775402"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:33:42.803502"], ["updated_at", "2015-04-01 09:33:42.803502"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 136  [["customer_id", 49], ["updated_at", "2015-04-01 09:33:42.815244"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 49]]
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 136]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 136]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 136]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 49]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:33:42.835555"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 09:33:42.835555"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:33:42.837041"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 09:33:42.837041"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:33:42.838047"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 09:33:42.838047"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCustomer Load (0.3ms)[0m  SELECT "customers".* FROM "customers"  WHERE (LOWER(first_name) LIKE LOWER('%J%'))
  [1m[36mCustomer Load (0.1ms)[0m  [1mSELECT "customers".* FROM "customers"  WHERE (LOWER(last_name) LIKE LOWER('%J%'))[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:33:42.888280"], ["updated_at", "2015-04-01 09:33:42.888280"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:33:42.889808"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:33:42.889808"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 137], ["product_id", 95]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 95]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 95]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 137  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 09:33:42.904402"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 95]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:33:42.917260"], ["updated_at", "2015-04-01 09:33:42.917260"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 09:33:42.918586"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:33:42.918586"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 138], ["product_id", 96]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 96]]
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 96]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 138[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 09:33:42.926554"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:33:42.928657"], ["updated_at", "2015-04-01 09:33:42.928657"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 09:33:42.929761"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 09:33:42.929761"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 139], ["product_id", 97]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 139]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 97]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 139  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 09:33:42.939760"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 97]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 97]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 139]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 139]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 09:37:16.609850"], ["updated_at", "2015-04-01 09:37:16.609850"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:37:16.637111"], ["updated_at", "2015-04-01 09:37:16.637111"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 140  [["customer_id", 53], ["updated_at", "2015-04-01 09:37:16.648697"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 53]]
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 140]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 140]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 140]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 53]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:37:16.668615"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 09:37:16.668615"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:37:16.670076"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 09:37:16.670076"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:37:16.671091"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 09:37:16.671091"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCustomer Load (0.3ms)[0m  SELECT "customers".* FROM "customers"  WHERE (LOWER(first_name) LIKE LOWER('%J%'))
  [1m[36mCustomer Load (0.2ms)[0m  [1mSELECT "customers".* FROM "customers"  WHERE (LOWER(last_name) LIKE LOWER('%J%'))[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:37:16.714298"], ["updated_at", "2015-04-01 09:37:16.714298"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:37:16.723150"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:37:16.723150"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 141], ["product_id", 98]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 98]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 98]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 141  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 09:37:16.741023"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:37:16.744778"], ["updated_at", "2015-04-01 09:37:16.744778"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:37:16.745982"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:37:16.745982"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 142], ["product_id", 99]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 99]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 99]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 142  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 09:37:16.755313"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.2ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 99]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:37:16.767405"], ["updated_at", "2015-04-01 09:37:16.767405"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 09:37:16.768824"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 09:37:16.768824"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 143], ["product_id", 100]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 143]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 100]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 143  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 09:37:16.778848"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 100]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 100]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 143]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 143]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:42:34.434774"], ["updated_at", "2015-04-01 09:42:34.434774"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 09:42:34.445983"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 09:42:34.445983"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 144], ["product_id", 101]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 144]]
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 101]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 144  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 09:42:34.479716"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 101]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 101]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 144]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 144]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", "2015-04-01 09:42:34.488286"], ["updated_at", "2015-04-01 09:42:34.488286"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:42:34.530317"], ["updated_at", "2015-04-01 09:42:34.530317"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 145  [["customer_id", 57], ["updated_at", "2015-04-01 09:42:34.532647"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1  [["customer_id", 57]]
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 145]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 145]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 145]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 57]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:42:34.543099"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 09:42:34.543099"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:42:34.544617"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 09:42:34.544617"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:42:34.545814"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 09:42:34.545814"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCustomer Load (0.3ms)[0m  SELECT "customers".* FROM "customers"  WHERE (LOWER(first_name) LIKE LOWER('%J%'))
  [1m[36mCustomer Load (0.2ms)[0m  [1mSELECT "customers".* FROM "customers"  WHERE (LOWER(last_name) LIKE LOWER('%J%'))[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:42:34.551306"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 09:42:34.551306"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:42:34.552605"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 09:42:34.552605"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:42:34.553585"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 09:42:34.553585"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCustomer Load (0.2ms)[0m  [1mSELECT "customers".* FROM "customers"  WHERE (LOWER(first_name) LIKE LOWER('%J%'))[0m
  [1m[35mCustomer Load (0.1ms)[0m  SELECT "customers".* FROM "customers"  WHERE (LOWER(last_name) LIKE LOWER('%J%'))
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:42:34.565416"], ["updated_at", "2015-04-01 09:42:34.565416"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 09:42:34.567023"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:42:34.567023"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 146], ["product_id", 102]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 102]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 102]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 146[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 09:42:34.578923"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 102]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:42:34.584808"], ["updated_at", "2015-04-01 09:42:34.584808"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:42:34.586200"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:42:34.586200"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 147], ["product_id", 103]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 103]]
  [1m[35mOrder Load (0.2ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 103]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 147  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 09:42:34.594250"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:59:17.847826"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 09:59:17.847826"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:59:17.852934"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 09:59:17.852934"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:59:17.854151"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 09:59:17.854151"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 09:59:17.855019"], ["updated_at", "2015-04-01 09:59:17.855019"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:59:17.868856"], ["updated_at", "2015-04-01 09:59:17.868856"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 148[0m  [["customer_id", 67], ["updated_at", "2015-04-01 09:59:17.883023"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 67]]
  [1m[35mProduct Load (0.8ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 148]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 148]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 148]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 67]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:59:17.908107"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 09:59:17.908107"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:59:17.909348"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 09:59:17.909348"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:59:17.910538"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 09:59:17.910538"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCustomer Load (0.3ms)[0m  [1mSELECT "customers".* FROM "customers"  WHERE (LOWER(first_name) LIKE LOWER('%J%'))[0m
  [1m[35mCustomer Load (0.2ms)[0m  SELECT "customers".* FROM "customers"  WHERE (LOWER(last_name) LIKE LOWER('%J%'))
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:59:17.913305"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 09:59:17.913305"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:59:17.914215"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 09:59:17.914215"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:59:17.915103"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 09:59:17.915103"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:59:17.916612"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 09:59:17.916612"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 09:59:17.917523"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 09:59:17.917523"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 09:59:17.918440"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 09:59:17.918440"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCustomer Load (0.1ms)[0m  [1mSELECT "customers".* FROM "customers"  WHERE (LOWER(first_name) LIKE LOWER('%J%'))[0m
  [1m[35mCustomer Load (0.2ms)[0m  SELECT "customers".* FROM "customers"  WHERE (LOWER(last_name) LIKE LOWER('%J%'))
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 09:59:17.921099"], ["updated_at", "2015-04-01 09:59:17.921099"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 09:59:17.967358"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:59:17.967358"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 149], ["product_id", 104]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 104]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 104]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 149[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 09:59:17.986254"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 104]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:59:18.002991"], ["updated_at", "2015-04-01 09:59:18.002991"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:59:18.004357"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 09:59:18.004357"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 150], ["product_id", 105]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 105]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 105]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 150  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 09:59:18.012617"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["complete", "f"], ["created_at", "2015-04-01 09:59:18.016769"], ["updated_at", "2015-04-01 09:59:18.016769"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2015-04-01 09:59:18.017973"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 09:59:18.017973"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)[0m  [["order_id", 151], ["product_id", 106]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 151]]
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  [["product_id", 106]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 151[0m  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 09:59:18.027913"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1  [["product_id", 106]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 106]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1  [["order_id", 151]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 151]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 10:00:25.773936"], ["updated_at", "2015-04-01 10:00:25.773936"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 10:00:25.787494"], ["discount", "0.0"], ["price", "100.0"], ["updated_at", "2015-04-01 10:00:25.787494"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 152], ["product_id", 107]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 152]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 107]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 152  [["balance_due", "-109.0"], ["grand_total", "-109.0"], ["items_total", "-100.0"], ["tax", "-9.0"], ["total_with_tax", "-109.0"], ["updated_at", "2015-04-01 10:00:25.816691"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 107]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 107]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 152]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 152]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 10:00:25.860053"], ["updated_at", "2015-04-01 10:00:25.860053"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 10:00:25.861514"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 10:00:25.861514"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 153], ["product_id", 108]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 108]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1[0m  [["product_id", 108]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 153[0m  [["balance_due", "-1.09"], ["grand_total", "-1.09"], ["items_total", "-1.0"], ["tax", "-0.09"], ["total_with_tax", "-1.09"], ["updated_at", "2015-04-01 10:00:25.869934"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 10:00:25.873253"], ["updated_at", "2015-04-01 10:00:25.873253"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "products" ("created_at", "discount", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2015-04-01 10:00:25.874365"], ["discount", "0.0"], ["price", "1.0"], ["updated_at", "2015-04-01 10:00:25.874365"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders_products" ("order_id", "product_id") VALUES ($1, $2)  [["order_id", 154], ["product_id", 109]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1  [["product_id", 109]]
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 109]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "balance_due" = $1, "grand_total" = $2, "items_total" = $3, "tax" = $4, "total_with_tax" = $5, "updated_at" = $6 WHERE "orders"."id" = 154[0m  [["balance_due", "1.09"], ["grand_total", "1.09"], ["items_total", "1.0"], ["tax", "0.09"], ["total_with_tax", "1.09"], ["updated_at", "2015-04-01 10:00:25.883501"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT  "orders".* FROM "orders" INNER JOIN "orders_products" ON "orders"."id" = "orders_products"."order_id" WHERE "orders_products"."product_id" = $1  ORDER BY "orders"."id" ASC LIMIT 1[0m  [["product_id", 109]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 10:00:25.899722"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 10:00:25.899722"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 10:00:25.901773"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 10:00:25.901773"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 10:00:25.902841"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 10:00:25.902841"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCustomer Load (0.3ms)[0m  [1mSELECT "customers".* FROM "customers"  WHERE (LOWER(first_name) LIKE LOWER('%J%'))[0m
  [1m[35mCustomer Load (0.2ms)[0m  SELECT "customers".* FROM "customers"  WHERE (LOWER(last_name) LIKE LOWER('%J%'))
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 10:00:25.906947"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 10:00:25.906947"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 10:00:25.908207"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 10:00:25.908207"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 10:00:25.909273"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 10:00:25.909273"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCustomer Load (0.1ms)[0m  SELECT "customers".* FROM "customers"  WHERE (LOWER(first_name) LIKE LOWER('%J%'))
  [1m[36mCustomer Load (0.1ms)[0m  [1mSELECT "customers".* FROM "customers"  WHERE (LOWER(last_name) LIKE LOWER('%J%'))[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 10:00:25.912948"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 10:00:25.912948"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 10:00:25.913996"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 10:00:25.913996"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 10:00:25.914879"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 10:00:25.914879"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 10:00:25.916426"], ["email", "jsmith@example.com"], ["first_name", "John"], ["last_name", "Smith"], ["updated_at", "2015-04-01 10:00:25.916426"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2015-04-01 10:00:25.917363"], ["email", "tjones@example.com"], ["first_name", "Tim"], ["last_name", "Tyler"], ["updated_at", "2015-04-01 10:00:25.917363"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "customers" ("created_at", "email", "first_name", "last_name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", "2015-04-01 10:00:25.918251"], ["email", "jjohnson@example.com"], ["first_name", "Val"], ["last_name", "Johnson"], ["updated_at", "2015-04-01 10:00:25.918251"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2015-04-01 10:00:25.919126"], ["updated_at", "2015-04-01 10:00:25.919126"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "orders" ("complete", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["complete", "f"], ["created_at", "2015-04-01 10:00:25.920318"], ["updated_at", "2015-04-01 10:00:25.920318"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "orders" SET "customer_id" = $1, "updated_at" = $2 WHERE "orders"."id" = 155[0m  [["customer_id", 89], ["updated_at", "2015-04-01 10:00:25.922391"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders"  WHERE "orders"."customer_id" = $1[0m  [["customer_id", 89]]
  [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" INNER JOIN "orders_products" ON "products"."id" = "orders_products"."product_id" WHERE "orders_products"."order_id" = $1  [["order_id", 155]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "orders_products" WHERE "orders_products"."order_id" = $1[0m  [["order_id", 155]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 155]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 89]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
